# Лекция 1

![image](https://github.com/tolisso/db-internals-2023/assets/57497898/9cb38ccc-3827-43f4-965f-4a7cdffa88b4)
![image](https://github.com/tolisso/db-internals-2023/assets/57497898/4a987cfb-f4ba-412a-aef5-dd8e78b50e94)
![image](https://github.com/tolisso/db-internals-2023/assets/57497898/88901bc0-6df2-46c7-9626-b05d8a509276)
![image](https://github.com/tolisso/db-internals-2023/assets/57497898/1d0a2ce1-32a0-4f4c-89af-8010c44449a6)
![image](https://github.com/tolisso/db-internals-2023/assets/57497898/07d11354-dbe2-45ca-9e81-bed011f129cd)

При обработке запроса происходит
1. Синтаксический анализ
2. Семантический анализ
3. Оптимизация запроса

Синтаксический анализ - преобразует запрос в синтаксическое дерево. Делается с помощью генераторов парсеров (Bison, ANTLR и т.д.) или реже пишется руками (например для более красивых ошибок)

Семантический анализ - проверка смысла запроса. Есть ли таблицы к которым обращаемся, правильная ли семантика операторов (напр. group by в select делается по возвращаемым полям)

Оптимизация запроса бывает двух видов

1. На основе AST дерева - очень больно и тяжело, так как куча синтаксиса (даже селектов очень много видов, а если там есть подзапросы то все совсем плохо) и под каждый случай надо подгонять оптимизации (Postgres)
2. На основе реляционного представления
